# üì° Smart Home Telemetry Platform

Smart Home Telemetry Platform ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö ¬´—É–º–Ω–æ–≥–æ –¥–æ–º–∞¬ª –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –¥–∞—Ç—á–∏–∫–æ–≤, –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ Kafka –∏ gRPC.
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –¥–æ–º–µ–Ω (Commerce Subsystem) ‚Äî –∑–∞–∫–∞–∑, –æ–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –Ω–∞ —Ç–µ—Ö –∂–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö.

‚∏ª

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º Java-—Å—Ç–µ–∫–µ, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Å–æ–±—ã—Ç–∏–π–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏ –Ω–∞–¥—ë–∂–Ω—É—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
	‚Ä¢	‚òï Java 17 ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
	‚Ä¢	üß± Maven (multi-module) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø—Ä–æ–µ–∫—Ç–∞
	‚Ä¢	üå± Spring Boot 3.x ‚Äî –∫–∞—Ä–∫–∞—Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
	‚Ä¢	üåê Spring Web / Spring MVC ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è REST API
	‚Ä¢	üì® Apache Kafka ‚Äî –æ–±–º–µ–Ω —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–µ–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
	‚Ä¢	üß¨ Avro –∏ Protocol Buffers (Protobuf) ‚Äî –±–∏–Ω–∞—Ä–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
	‚Ä¢	üîó gRPC ‚Äî –¥–≤–æ–∏—á–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Analyzer ‚Üî HubRouterController)
	‚Ä¢	üóÑÔ∏è PostgreSQL ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –∑–∞–∫–∞–∑–æ–≤ –∏ –æ–ø–ª–∞—Ç
	‚Ä¢	üßÆ Spring Data JPA / Hibernate ‚Äî ORM-—É—Ä–æ–≤–µ–Ω—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
	‚Ä¢	üß≠ Netflix Eureka ‚Äî Service Discovery –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞
	‚Ä¢	‚öôÔ∏è Spring Cloud Config ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
	‚Ä¢	üö™ Spring Cloud Gateway ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ REST-–∑–∞–ø—Ä–æ—Å–æ–≤
	‚Ä¢	ü§ù OpenFeign ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ commerce-–¥–æ–º–µ–Ω–∞
	‚Ä¢	üê≥ Docker / Docker Compose ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
	‚Ä¢	üìú OpenAPI / Swagger ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ REST-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
	‚Ä¢	üß™ JUnit 5 / Spring Test ‚Äî –º–æ–¥—É–ª—å–Ω–æ–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
	‚Ä¢	ü™µ SLF4J / Logback ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

‚∏ª

### üí° –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —É—Ä–æ–≤–Ω–∏ —Ä–∞–±–æ—Ç—ã —Å —É–º–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏:
–æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –æ—Ç –¥–∞—Ç—á–∏–∫–æ–≤ –∏ —Ö–∞–±–æ–≤, —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Avro –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ Kafka, –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ —Å–Ω–∞–ø—à–æ—Ç—ã, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ gRPC.
–û—Ç–¥–µ–ª—å–Ω–∞—è commerce-–ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Ö –∂–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∫ –±–∏–∑–Ω–µ—Å-–¥–æ–º–µ–Ω—É –∑–∞–∫–∞–∑–æ–≤ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏.

‚∏ª

### üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω–æ–µ Maven-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞—é—â–µ–µ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–æ–º–µ–Ω–∞: Telemetry Core –∏ Commerce Subsystem.

‚∏ª

### üõ∞Ô∏è Telemetry Core

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ ¬´—É–º–Ω–æ–≥–æ –¥–æ–º–∞¬ª.

–ú–æ–¥—É–ª–∏:
	‚Ä¢	üì• telemetry/collector ‚Äî REST API –¥–ª—è –ø—Ä–∏—ë–º–∞ JSON, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ Avro –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Kafka
	‚Ä¢	‚öôÔ∏è telemetry/aggregator ‚Äî –∫–æ–Ω—Å—å—é–º–µ—Ä Kafka, —Å–æ–±–∏—Ä–∞—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤ –≤ —Å–Ω–∞–ø—à–æ—Ç—ã
	‚Ä¢	üß† telemetry/analyzer ‚Äî –∞–Ω–∞–ª–∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Ö –≤ PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π —á–µ—Ä–µ–∑ gRPC
	‚Ä¢	üßæ serialization/avro-schemas ‚Äî –Ω–∞–±–æ—Ä Avro-—Å—Ö–µ–º —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ–∫–∞–∑–∞–Ω–∏–π
	‚Ä¢	üß© serialization/proto-schemas ‚Äî Protobuf-—Å—Ö–µ–º—ã –¥–ª—è gRPC –º–µ–∂–¥—É Analyzer –∏ HubRouterController
	‚Ä¢	üõ†Ô∏è infra ‚Äî –æ–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka, PostgreSQL –∏ Docker

‚∏ª

### üõí Commerce Subsystem

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫ –±–∏–∑–Ω–µ—Å-–¥–æ–º–µ–Ω—É e-commerce.

–ú–æ–¥—É–ª–∏ –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:
	‚Ä¢	üåâ gateway ‚Äî Spring Cloud Gateway (—Ä–æ—É—Ç–∏–Ω–≥ /api/v1/**, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞)
	‚Ä¢	üì¶ order-service ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–∫–∞–∑–æ–≤ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–∞–º–∏
	‚Ä¢	üí≥ payment-service ‚Äî —Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏, —É—á—ë—Ç –ù–î–°, —Å—Ç–∞—Ç—É—Å—ã –æ–ø–ª–∞—Ç –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã
	‚Ä¢	üöö delivery-service ‚Äî —Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –≤–µ—Å—É, –æ–±—ä—ë–º—É –∏ –∞–¥—Ä–µ—Å–∞–º
	‚Ä¢	üè≠ warehouse-service ‚Äî —Å–±–æ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∏—Ö –≤ –¥–æ—Å—Ç–∞–≤–∫—É
	‚Ä¢	üîÑ interaction-api ‚Äî –æ–±—â–∏–π –º–æ–¥—É–ª—å DTO –¥–ª—è Feign-–∫–ª–∏–µ–Ω—Ç–æ–≤
	‚Ä¢	üîç discovery ‚Äî Eureka Server (–ø–æ—Ä—Ç 8761)
	‚Ä¢	üß≠ config-server ‚Äî Spring Cloud Config Server (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

‚∏ª

### üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

–û–±–º–µ–Ω —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–µ–π –º–µ–∂–¥—É Collector, Aggregator –∏ Analyzer –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Apache Kafka.
Analyzer –≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø–æ gRPC —á–µ—Ä–µ–∑ HubRouterController.
Commerce-—Å–µ—Ä–≤–∏—Å—ã (order, payment, delivery) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π —á–µ—Ä–µ–∑ REST –∏ Feign-–∫–ª–∏–µ–Ω—Ç–æ–≤.
Eureka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤, –∞ Config Server ‚Äî –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.
–í—Å–µ –≤–Ω–µ—à–Ω–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Spring Cloud Gateway, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏.

‚∏ª

### üì® Kafka-—Ç–æ–ø–∏–∫–∏

–í —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–æ–ø–∏–∫–∞:
	‚Ä¢	telemetry.sensors.v1 ‚Äî –ø–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤
	‚Ä¢	telemetry.hubs.v1 ‚Äî —Å–æ–±—ã—Ç–∏—è —Ö–∞–±–∞ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
	‚Ä¢	telemetry.snapshots.v1 ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (—Å–Ω–∞–ø—à–æ—Ç—ã)

‚∏ª

### üß† –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã Telemetry Core

Collector
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç —Ö–∞–±–æ–≤, —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Avro –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ Kafka –≤ —Ç–æ–ø–∏–∫–∏ telemetry.sensors.v1 –∏ telemetry.hubs.v1.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π KafkaProducer —Å —Ä—É—á–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

Aggregator
–°–ª—É—à–∞–µ—Ç Kafka-—Ç–æ–ø–∏–∫ telemetry.sensors.v1, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∏—è –≤ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Å–Ω–∞–ø—à–æ—Ç—ã) –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ telemetry.snapshots.v1.

Analyzer
–°–ª—É—à–∞–µ—Ç —Å–Ω–∞–ø—à–æ—Ç—ã, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö, —Ö—Ä–∞–Ω–∏—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —É—Å–ª–æ–≤–∏—è –≤ PostgreSQL, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –∏ –ø—Ä–∏ –∏—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ gRPC.
–î–ª—è –≤—ã–∑–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HubRouterControllerBlockingStub –∏ –º–µ—Ç–æ–¥ handleDeviceAction.

‚∏ª

### üß¨ Avro-—Å—Ö–µ–º—ã

–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω: ru.yandex.practicum.kafka.telemetry.event

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã:

–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è:
DeviceTypeAvro, ConditionTypeAvro, ConditionOperationAvro, ActionTypeAvro

–°–æ–±—ã—Ç–∏—è:
DeviceAddedEventAvro, DeviceRemovedEventAvro, ScenarioAddedEventAvro, ScenarioRemovedEventAvro, HubEventAvro

–î–∞—Ç—á–∏–∫–∏:
ClimateSensorAvro, LightSensorAvro, MotionSensorAvro, SwitchSensorAvro, TemperatureSensorAvro

–û–±—ë—Ä—Ç–∫–∞:
SensorEventAvro (–ø–æ–ª—è id, hubId, timestamp, payload ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞—Ç—á–∏–∫–æ–≤)

‚∏ª

### üåê API —Å–µ—Ä–≤–∏—Å–æ–≤

#### Collector
	‚Ä¢	POST /api/v1/collector/sensors
	‚Ä¢	POST /api/v1/collector/hub-events

#### Order
	‚Ä¢	GET /api/v1/order?username={string}
	‚Ä¢	PUT /api/v1/order
	‚Ä¢	POST /api/v1/order/payment
	‚Ä¢	POST /api/v1/order/payment/failed
	‚Ä¢	POST /api/v1/order/delivery
	‚Ä¢	POST /api/v1/order/delivery/failed
	‚Ä¢	POST /api/v1/order/completed
	‚Ä¢	POST /api/v1/order/calculate/total
	‚Ä¢	POST /api/v1/order/calculate/delivery
	‚Ä¢	POST /api/v1/order/assembly
	‚Ä¢	POST /api/v1/order/assembly/failed
	‚Ä¢	POST /api/v1/order/return

#### Payment
	‚Ä¢	POST /api/v1/payment
	‚Ä¢	POST /api/v1/payment/productCost
	‚Ä¢	POST /api/v1/payment/totalCost
	‚Ä¢	POST /api/v1/payment/refund
	‚Ä¢	POST /api/v1/payment/failed

#### Delivery
	‚Ä¢	POST /api/v1/delivery
	‚Ä¢	POST /api/v1/delivery/failed
	‚Ä¢	GET /api/v1/delivery/{id}

‚∏ª

#### üß≠ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

üîπ Collector ‚Üí Kafka ‚Üí Aggregator ‚Üí Kafka ‚Üí Analyzer ‚Üí gRPC ‚Üí HubRouterController
(–¥–∞–Ω–Ω—ã–µ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞)

üîπ Order ‚Üí Payment ‚Üí Delivery ‚Üí Warehouse
(—Ü–µ–ø–æ—á–∫–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ commerce-–¥–æ–º–µ–Ω–µ)

üîπ Gateway ‚Üî Eureka ‚Üî Config Server
(–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤)
